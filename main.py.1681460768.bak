# -*- coding: UTF-8 -*-


import random
import os
import cvt2utf


class Neuron:
    wagi = []
    training_speed = 0.005

    def __init__(self, liczba_wejsc):
        self.liczba_wejsc = liczba_wejsc
        for i in range(self.liczba_wejsc):
            x = random.random()
            while x == 0:
                x = random.random()
            self.wagi.append(x)

    def calc_net(self, wejscia):
        suma = 0
        for x in range(self.liczba_wejsc):
            suma += float(wejscia[x]) * float(self.wagi[x])
        return 0 if suma < 0 else 1

    def train(self, training_line):
        result = self.calc_net(training_line[:-1])
        for x in range(len(self.wagi)):
            self.wagi[x] += (float(training_line[-1]) - result) * self.training_speed * float(training_line[x])
        return abs(float(training_line[-1]) - result)


def replacements(x: str):
    x = x.lower()
    x = x.replace('ą', 'a')
    x = x.replace('ć', 'c')
    x = x.replace('ę', 'e')
    x = x.replace('ł', 'l')
    x = x.replace('ń', 'n')
    x = x.replace('ó', 'u')
    x = x.replace('ś', 's')
    x = x.replace('ź', 'z')
    x = x.replace('ż', 'z')

    x = x.replace('ä', 'a')
    x = x.replace('ö', 'o')
    x = x.replace('ü', 'u')
    x = x.replace('ß', 's')
    print(x)
    return x


def main():
    cvt2utf
    list_of_rows = []
    row = []
    text = ""
    list_of_directories = os.listdir('data_train')

    for dirname in list_of_directories:
        d = os.listdir('data_train/' + dirname)
        for file in d:
            x = open('data_train/' + dirname + "/" + file)
            text += x.read()
            text = replacements(text)
            for letter in "abcdefghijklmnopqrstuvwxyz":
                row.append(text.count(letter))
            row[-1] = dirname
            list_of_rows.append(row)
            text = ""
            row = []

    for x in list_of_rows:
        print(x)


if __name__ == "__main__":
    main()
